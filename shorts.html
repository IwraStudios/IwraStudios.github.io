<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A modern web novel">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Chivarly is Dead</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"> </script>
    <script>
        (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-102031002-1', 'auto');
        ga('send', 'pageview');
        
        var _second = 1000;
        var _minute = _second * 60;
        var _hour = _minute * 60;
        var _day = _hour * 24;
                                //VERY VERY VERY VERY VERY VERY VERY
        var volume = "shorts"  //VERY  IMPORTANTE MUST CHANGE  VERY
                                //VERY VERY VERY VERY VERY VERY VERY
        function dateProgress(from, end, chapter)
        {
            if (chapter.length == 1) { chapter = "0" + chapter; };
            var progressB = "PrCh"+chapter
            var tooltip = "TtCh"+chapter
            var button = "BuCh"+chapter
            var end = new Date(end);
            var from = new Date(from);
            var now = new Date();
            var distance = end - now;
            var fromDis = end - from;
            if(Math.floor(((distance  / _second) / (fromDis/_second) * 10000 - 10000)*-1 ) < 0)
            {
                document.getElementById(tooltip).innerHTML = "Not even started yet :P"
            }
            else if (distance < 0) {
                document.getElementById(tooltip).innerHTML = "Read it now!"
                document.getElementById(progressB).className = "mdl-progress mdl-js-progress hidden";
                document.getElementById(button).removeAttribute("disabled");
                document.getElementById(button).href = "book/"+volume+"/Chapter"+chapter+".html";
            } else {
            var days = Math.floor(distance / _day);
            var hours = Math.floor(distance / _hour);
            var minutes = Math.floor((distance % _hour) / _minute);
            var seconds = Math.floor((distance % _minute) / _second);
            var procent = Math.floor(((distance  / _second) / (fromDis/_second) * 10000 - 10000)*-1 );
            document.getElementById(progressB).MaterialProgress.setProgress(Math.floor(procent/100));
            document.getElementById(tooltip).innerHTML = "<strong>"+(procent/100) + '%</strong>, ';
            document.getElementById(tooltip).innerHTML += hours + 'h ';
            document.getElementById(tooltip).innerHTML += minutes + 'm ';
            document.getElementById(tooltip).innerHTML += seconds + 's';
            };
        };

        function setCookie(cname,cvalue) {
            document.cookie = cname + "=" + cvalue + ";path=/";
        }
        
        function getCookie(cname) {
            var name = cname + "=";
            var decodedCookie = decodeURIComponent(document.cookie);
            var ca = decodedCookie.split(';');
            for(var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }
        
        function changeColor(button){
            var red = 255; //i.e. FF
            var green = 0;
            var stepSize = 10;//how many colors do you want?
            function step(button){
                if(green < 255)
                {
                    green += stepSize;
                    if(green > 255) { green = 255; };
                    button.style.color = "RGB("+red+", "+green+", 0)";
                    setTimeout(step, 1, button);
                    return;
                }
                else if(red > 0)
                {
                    red -= stepSize;
                    if(red < 0) { red = 0; };
                    button.style.color = "RGB("+red+", "+green+", 0)";
                    setTimeout(step, 1, button);
                    return;
                };
            };
            step(button);

        }

        function CheckCookies() {

            var i = 0;
            while (i < 15) {
                i++;
                if (String(i).length == 1) { var iName = "0" + i; } else { var iName = "" + i; };
                if (getCookie(volume).indexOf("Chapter" + iName) >= 0) {
                    setTimeout(changeColor, 500 + 500 * i, document.getElementById("BuCh" + iName));
                };
                console.log(getCookie(volume));
            };
        };


            setInterval(dateProgress, 101, "07/07/2017 15:01", "07/10/2017 15:00", "01");
            setInterval(dateProgress, 102, "07/10/2017 15:01", "07/13/2017 15:00", "02");
            setInterval(dateProgress, 103, "07/13/2017 15:01", "07/17/2017 16:00", "03");
        
        
    </script>
    
</head>

<body onload="CheckCookies()">
    <div class="hidden-xs">
        <div id="particles-js" style=" position: absolute; width: 100%;z-index: 4;pointer-events: none;">
        </div>
        <div style="height: 25%"></div>
    </div>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">

        <header class="mdl-layout__header mdl-layout__header--waterfall">
            <!-- Top row, always visible -->

            <div class="mdl-layout__header-row">
                <!-- Title -->
                <span class="mdl-layout-title">Chivalry is Dead</span>
                <div class="mdl-layout-spacer"></div>
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right is-upgraded" data-upgraded=",MaterialTextfield">
                    <label class="mdl-button mdl-js-button mdl-button--icon" for="waterfall-exp" data-upgraded=",MaterialButton">
                        <i class="material-icons">search</i>
                    </label>
                    <div class="mdl-textfield__expandable-holder">
                        <input class="mdl-textfield__input" name="sample" id="waterfall-exp" type="text">
                    </div>
                </div>
            </div><!-- Bottom row, not visible on scroll -->
            <div class="mdl-layout__header-row">
                <div class="mdl-layout-spacer"></div>
                <!-- Navigation -->
                <nav class="mdl-navigation mdl-layout--large-screen-only">
                    <a class="mdl-navigation__link is-active" href="index.html"><b>VOLUME 1 - BEAUTIFUL DISASTERS</b></a>
                    <a class="mdl-navigation__link is-active" href="shorts.html"><b>SHORT STORIES</b></a>
                    <a class="mdl-navigation__link" href="about.html"><b>ABOUT</b></a>
                    <a class="mdl-navigation__link" href="contact.html"><b>LEAVE A REVIEW</b></a>
                </nav>
            </div>
        </header>
        <div class="mdl-layout__drawer mdl-layout--small-screen-only">
            <nav class="mdl-navigation mdl-typography--body-1-force-preferred-font">
                <a class="mdl-navigation__link is-active" href="index.html">Volume I</a>
                    <a class="mdl-navigation__link is-active" href="shorts.html"><b>Shorts</b></a>
                <a class="mdl-navigation__link" href="about.html">About</a>
                <a class="mdl-navigation__link" href="contact.html">Contact</a>
            </nav>
        </div>
        <main class="mdl-layout__content">
            <div class="mdl-grid portfolio-max-width">
                <div class="mdl-cell mdl-card mdl-shadow--4dp portfolio-card">
                    <div class="mdl-card__media">
                        <img class="article-image" src=" images/ChapterPreviews/Shorts/Chapter1.jpg" border="0" alt="">
                    </div>
                    <div class="mdl-card__title">
                        <h2 class="mdl-card__title-text">The best yet worst - I</h2>
                    </div>
                        <div class="mdl-card__supporting-text" id="Ch01">
                            <div class="mdl-progress mdl-js-progress" href="" id="PrCh01"></div>
                            <div class="mdl-tooltip" data-mdl-for="Ch01" id="TtCh01">
                                Loading...
                            </div>
                        </div>
                        <div class="mdl-card__actions mdl-card--border">
                            <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect mdl-button--accent" href="#" id="BuCh01" disabled>Read Chapter</a>
                        </div>
                </div>
                <div class="mdl-cell mdl-card mdl-shadow--4dp portfolio-card">
                    <div class="mdl-card__media">
                        <img class="article-image" src=" images/ChapterPreviews/Shorts/Chapter2.jpg" border="0" alt="">
                    </div>
                    <div class="mdl-card__title">
                        <h2 class="mdl-card__title-text">The best yet worst - II</h2>
                    </div>
                        <div class="mdl-card__supporting-text" id="Ch02">
                            <div class="mdl-progress mdl-js-progress" href="" id="PrCh02"></div>
                            <div class="mdl-tooltip" data-mdl-for="Ch02" id="TtCh02">
                                Loading...
                            </div>
                        </div>
                        <div class="mdl-card__actions mdl-card--border">
                            <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect mdl-button--accent" href="#" id="BuCh02" disabled>Read Chapter</a>
                        </div>
                </div>
                
                <div class="mdl-cell mdl-card mdl-shadow--4dp portfolio-card">
                    <div class="mdl-card__media">
                        <img class="article-image" src=" images/ChapterPreviews/Shorts/Chapter3.jpg" border="0" alt="">
                    </div>
                    <div class="mdl-card__title">
                        <h2 class="mdl-card__title-text">The best yet worst - III</h2>
                    </div>
                        <div class="mdl-card__supporting-text" id="Ch03">
                            <div class="mdl-progress mdl-js-progress" href="" id="PrCh03"></div>
                            <div class="mdl-tooltip" data-mdl-for="Ch03" id="TtCh03">
                                Loading...
                            </div>
                        </div>
                        <div class="mdl-card__actions mdl-card--border">
                            <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect mdl-button--accent" href="#" id="BuCh03" disabled>Read Chapter</a>
                        </div>
                </div>
                
        </div>
            <footer class="mdl-mini-footer">
                <div class="mdl-mini-footer__left-section">
                    <div class="mdl-logo">Copyright 2017 IwraStudios Inc. All rights reserved.</div>
                </div>
                <div class="mdl-mini-footer__right-section">
                    <ul class="mdl-mini-footer__link-list">
                        <li><a href="">Privacy & Terms</a></li>
                    </ul>

                </div>
            </footer>

        </main>
    </div>
    <script src="Particles.js"></script>
</body>

</html>
